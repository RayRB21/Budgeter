{% extends 'base.html' %}

{% block head %}
<title>testcal</title>
{% endblock %}

{% block body %}
<div class="p-4">
  <div class="container">
    <h3 class="mb-0" style="margin-left: -1150px; color:rgb(238, 238, 238)">{{ month_name }}</h3>

    <!-- Month/Year Selection Form -->
    <form method="GET" class="row g-3 justify-content-center mb-4" style=" margin-left: 900px">
      <div class="col-auto">
        <select name="month" class="form-select" >
          {% for m_value, m_name in months %}
            <option value="{{ m_value }}" {% if m_value == month %}selected{% endif %}>{{ m_name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-auto">
        <select name="year" class="form-select">
          {% for y in years %}
            <option value="{{ y }}" {% if y == year %}selected{% endif %}>{{ y }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-info">Show Calendar</button>
      </div>
    </form>

    <!-- Calendar Table -->
    <table class="table table-bordered text-center table-striped">
      <thead class="table-light">
        <tr>
          <th><img src="{{ url_for('static', filename='assets/sun.png') }}" width = "40px" alt="SUN"></th>
          <th><img src="{{ url_for('static', filename='assets/mon.png') }}" width = "40px" alt="MON"></th>
          <th><img src="{{ url_for('static', filename='assets/tue.png') }}" width = "40px" alt="TUE"></th>
          <th><img src="{{ url_for('static', filename='assets/wed.png') }}" width = "40px" alt="WED"></th>
          <th><img src="{{ url_for('static', filename='assets/thu.png') }}" width = "40px" alt="THU"></th>
          <th><img src="{{ url_for('static', filename='assets/fri.png') }}" width = "40px" alt="FRI"></th>  
          <th><img src="{{ url_for('static', filename='assets/sat.png') }}" width = "40px" alt="SAT"></th>
        </tr>
      </thead>
      <tbody>
        {% for week in calendar %}
        <tr>
          {% for day in week %}
          {% set cell_id = [day,month,year] %}
            <td align="left" class="{{ 'not-avail' if day == 0 else '' }} pacifico" height="150px">
                {{"" if day == 0 else day }}
                <form method="GET" action="{{ url_for('transactions') }}" style="margin:0;">
                    <button type="submit" name="selected-cell" value="{{cell_id}}" class="btn-link p-0 m-0 w-100 h-100" style="background:none; border:none; cursor:pointer;">
                    {{cell_id if day != 0 else ""}}
                    </button>
                </form>
            </td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}

<!--"{{ 'not-avail' if day == 0 else '/transactions' }}"-->

