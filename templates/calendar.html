{% extends 'base.html' %}

{% block head %}
<title>testcal</title>
{% endblock %}

{% block body %}
<div class="p-4">
  <div class="container">
    <h3 class="mb-0" style="margin-left: -1150px; color:rgb(238, 238, 238)">{{ month_name }}</h3>

    <!-- Month/Year Selection Form -->
    <form method="GET" class="row g-3 justify-content-center mb-4" style=" margin-left: 900px">
      <div class="col-auto">
        <select name="month" class="form-select" >
          {% for m_value, m_name in months %}
            <option value="{{ m_value }}" {% if m_value == month %}selected{% endif %}>{{ m_name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-auto">
        <select name="year" class="form-select">
          {% for y in years %}
            <option value="{{ y }}" {% if y == year %}selected{% endif %}>{{ y }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-info">Show Calendar</button>
      </div>
    </form>



<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">{{modal_title}}</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {{modal_events}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>

{% if show_modal %}
<script>
  var myModal = new bootstrap.Modal(document.getElementById('exampleModal'));
  myModal.show();
</script>
{% endif %}


    <!-- Calendar Table -->
    <table class="table table-bordered text-center table-striped">
      <thead class="table-light">
        <tr>
          <th><img src="{{ url_for('static', filename='assets/sun.png') }}" width = "40px" alt="SUN"></th>
          <th><img src="{{ url_for('static', filename='assets/mon.png') }}" width = "40px" alt="MON"></th>
          <th><img src="{{ url_for('static', filename='assets/tue.png') }}" width = "40px" alt="TUE"></th>
          <th><img src="{{ url_for('static', filename='assets/wed.png') }}" width = "40px" alt="WED"></th>
          <th><img src="{{ url_for('static', filename='assets/thu.png') }}" width = "40px" alt="THU"></th>
          <th><img src="{{ url_for('static', filename='assets/fri.png') }}" width = "40px" alt="FRI"></th>
          <th><img src="{{ url_for('static', filename='assets/sat.png') }}" width = "40px" alt="SAT"></th>
        </tr>
      </thead>
      <tbody>
        {% for week in calendar %}
        <tr>
          {% for day in week %}
          {% set cell_id = day~"-"~month~"-"~year %}
            <td  class="{{ 'not-avail' if day == 0 else '' }} pacifico" height="150px">
              <div align="left">
                {% if day != 0 %}
                {{day}}
              </div>
                  <div align ="right">
                    <a type="button" class="btn btn-warning"  href="{{ url_for('addEvent', cell_id=cell_id) }}">
                    {{cell_id}} <!--REPLACE WITH "ADD EVENT" WHEN NOT DEBUGGING-->
                    </a>
                  </div>
                  {% for event in session["events"][cell_id] %}
                  <button type="button" class=" btn btn-warning">{{ event[0] ~ " " ~ event[1] ~ " " ~ event[2] }} </button>
                  {% endfor %}
                {% endif %}

            </td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}

<!--"{{ 'not-avail' if day == 0 else '/transactions' }}"-->